/**
 * Leaderboard Stats - Compact Horizontal Bar
 * Displays summary statistics in a single line.
 */
'use client';

import {
  Trophy,
  CheckCircle2,
  Clock3,
  TrendingUp,
} from 'lucide-react';

import type { LeaderboardStats as StatsType } from '@/hooks/use-league-leaderboard';

// ============================================================================
// Types
// ============================================================================

interface LeaderboardStatsProps {
  stats: StatsType;
}

// ============================================================================
// Compact Stat Item
// ============================================================================

interface StatItemProps {
  label: string;
  value: number | string;
  icon: React.ElementType;
  colorClass: string;
}

function StatItem({ label, value, icon: Icon, colorClass }: StatItemProps) {
  return (
    <div className="flex min-w-[140px] items-center gap-3 rounded-lg border bg-background px-3 py-2 shadow-sm">
      <span className={`flex size-8 items-center justify-center rounded-md ${colorClass} bg-current/10`}>
        <Icon className="size-4 text-current" />
      </span>
      <div className="flex flex-col leading-tight">
        <span className="text-[11px] font-medium uppercase tracking-wide text-muted-foreground">
          {label}
        </span>
        <span className="text-sm font-semibold tabular-nums">
        {typeof value === 'number' ? value.toLocaleString() : value}
        </span>
      </div>
    </div>
  );
}

// ============================================================================
// Main Component - Compact Horizontal Bar
// ============================================================================

export function LeaderboardStats({ stats }: LeaderboardStatsProps) {
  const approvalRate = stats.total_submissions > 0
    ? Math.round((stats.approved / stats.total_submissions) * 100)
    : 0;

  return (
    <div className="flex flex-wrap items-center gap-2 rounded-xl border bg-card/60 p-2 sm:p-3">
      <StatItem
        label="Submissions"
        value={stats.total_submissions}
        icon={Trophy}
        colorClass="text-primary"
      />
      <StatItem
        label="Approved"
        value={stats.approved}
        icon={CheckCircle2}
        colorClass="text-emerald-500"
      />
      <StatItem
        label="Pending"
        value={stats.pending}
        icon={Clock3}
        colorClass="text-amber-500"
      />
      <StatItem
        label="Approval"
        value={`${approvalRate}%`}
        icon={TrendingUp}
        colorClass="text-blue-500"
      />
    </div>
  );
}

export default LeaderboardStats;

